name: ASCII Art Updater

on:
  schedule:
    - cron: "0 */6 * * *" # every 6 hours
  workflow_dispatch:

jobs:
  ascii:
    runs-on: ubuntu-latest
    steps:
      - name: Generate ASCII
        run: |
          ascii=$(curl -s https://artii.herokuapp.com/make?text=${{ github.repository_owner }} | head -n 5)
          echo '{"schemaVersion":1,"label":"ASCII","message":"'"$(echo $ascii | head -c 20)"'...","color":"pink"}' > ascii.json

      - name: Upload ASCII Badge
        uses: exuanbo/actions-deploy-gist@v1
        with:
          token: ${{ secrets.PAT_TOKEN }}
          gist_id: ee32a0096896ccc81e0302d6852fecb3
          file_path: ascii.json
