name: Programming Meme Updater

on:
  schedule:
    - cron: "0 */12 * * *" # every 12 hours
  workflow_dispatch:

jobs:
  meme:
    runs-on: ubuntu-latest
    steps:
      - name: Fetch Meme
        run: |
          url=$(curl -s https://meme-api.com/gimme/programming | jq -r '.url')
          echo '{"schemaVersion":1,"label":"Meme","message":"ðŸ˜‚ New Meme","color":"orange","link":"'"$url"'"}' > meme.json

      - name: Upload Meme Badge
        uses: exuanbo/actions-deploy-gist@v1
        with:
          token: ${{ secrets.PAT_TOKEN }}
          gist_id: ee32a0096896ccc81e0302d6852fecb3
          file_path: meme.json
